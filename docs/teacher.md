# 👨‍🏫 教師向け指導ガイド

M5StickC Plus2距離測定システムの技術的背景と指導のポイントを説明します。

## 教育目標と学習効果

### 学習できる概念

!!! note "教科横断的な学習効果"
    - **物理**: 距離、速度、時間の関係  
    - **数学**: グラフの読み取り、移動平均の概念
    - **情報**: センサー技術、データ処理、IoT通信  
    - **実験**: データ収集、分析、考察の方法

## 🏫 複数班での授業運営

### センサー管理システム

#### センサー名の命名規則
```cpp
// コード内でのセンサー名設定例
const char* sensorName = "phys_ken_001";  // 1班用
const char* sensorName = "phys_ken_002";  // 2班用
const char* sensorName = "phys_ken_003";  // 3班用
// ...最大で同時接続可能な班数まで
```

#### 推奨班分け

!!! tip "クラス運営のコツ"
    - **1クラス4-8班程度**が管理しやすい
    - **各班3-4名**で1台のセンサーを共有  
    - **Bluetooth通信の混雑**を避けるため、同時接続は8台程度まで推奨

### 授業前準備

#### 1. センサーのセットアップ
```
班番号 | センサー名 | 表示確認 | 動作確認
-------|------------|----------|----------
1班    | phys_ken_001 | ✓ | ✓
2班    | phys_ken_002 | ✓ | ✓
3班    | phys_ken_003 | ✓ | ✓
...
```

#### 2. 生徒への事前指導ポイント

!!! example "指導の重要ポイント"
    - **センサー名の確認方法**: 電源投入時の画面表示
    - **自分の班のセンサーのみ使用**: 他班のデータ混在防止
    - **Bluetooth接続時の注意**: 必ず画面表示名と一致するデバイスを選択

#### 3. トラブル予防策

!!! warning "授業前の準備"
    - **センサー名一覧表**を黒板に掲示  
    - **各班にセンサー名のメモ**を配布
- **予備センサー**を2-3台準備（故障・接続トラブル対応）

## システムの技術的概要

### 測定原理
**ToF（Time of Flight）センサー VL53L0X**
- レーザー光の飛行時間から距離を算出
- 測定精度: ±3%（理想条件下）
- 測定範囲: 30mm〜3000mm
- 応答速度: 約20-50Hz

### データ処理の仕組み

#### 1. 移動平均フィルタ
```
現在の値 = (過去2個の測定値の合計) ÷ 2
```
**教育的意味**: ノイズ除去、データの平滑化を学習

#### 2. 速度計算
```
速度 = (現在の距離 - 前回の距離) ÷ 経過時間
```
**教育的意味**: 微分の概念、瞬間速度の理解

#### 3. データ出力形式
- **シリアル出力**: CSV形式（時間,距離）
- **Bluetooth出力**: リアルタイムグラフ表示
- **画面表示**: 即座の視覚的フィードバック

## 📱 Bluetooth接続管理のポイント

### よくあるトラブルと対処法

#### 1. 「センサーが見つからない」
**原因**: 
- 電源が入っていない
- Bluetoothの通信範囲外
- 他のデバイスが占有中

**対処法**:
- センサーの再起動
- スマートフォンを近づける
- Phyphoxアプリの再起動

#### 2. 「違う班のセンサーに接続してしまった」
**影響**: 
- 接続された班のセンサーが使用不可になる
- データの混在が発生

**対処法**:
- 即座に接続を切断
- 正しいセンサー名で再接続
- 他の班への影響を確認

#### 3. 「複数の生徒が同じセンサーを選ぼうとする」
**予防策**:
- 班内での役割分担を明確化
- 1名がPhyphox操作担当
- 他のメンバーは測定・記録担当

## 指導上のポイント

### 🎯 授業での活用例

#### 基礎レベル（中学生程度）
1. **距離の概念理解**: 30cm, 50cm, 1mの物体配置実験
2. **グラフ読み取り**: Phyphoxでリアルタイムグラフ観察
3. **データ記録**: 簡単な測定結果の記録と比較
4. **班活動**: 正しいセンサー選択と協力

#### 応用レベル（高校生程度）
1. **速度の概念**: 等速運動、加速運動の測定
2. **データ分析**: CSVデータのExcel/Googleスプレッドシート分析
3. **誤差について**: 測定精度と誤差要因の考察
4. **実験計画**: 班で実験手順を計画・実行

#### 発展レベル（大学生・研究レベル）
1. **信号処理**: 移動平均フィルタの効果確認
2. **通信技術**: Bluetooth LEの仕組み理解
3. **プログラミング**: Arduino IDEでのコード解析・改造
4. **システム設計**: 複数センサー同時運用の課題と解決

### 📚 指導時の注意点

#### 安全面
- USB充電時の取り扱い注意
- 精密機器のため落下に注意
- レーザー光は目に直接向けない（Class1レーザーで安全）

#### 技術面
- 測定対象: 反射率の高い平面が理想
- 環境光: 直射日光下では精度低下の可能性
- 測定角度: センサー軸に対して垂直な面が最適

#### 班活動管理面
- **センサー名の再確認**を定期的に促す
- **接続トラブル時の迅速な対応**体制を整備
- **班間でのデータ共有方法**を事前に決定

## 授業運営チェックリスト

### 授業開始時
- [ ] 全センサーの動作確認完了
- [ ] 各班にセンサー名を通知済み
- [ ] 生徒用配布資料にセンサー名記載済み
- [ ] Phyphox接続方法をデモンストレーション済み

### 実験中
- [ ] 各班が正しいセンサーに接続しているか巡回確認
- [ ] トラブル発生時の対応フローを準備
- [ ] 予備センサーの動作確認済み

### 授業終了時
- [ ] 全センサーの電源OFF確認
- [ ] データ保存状況の確認
- [ ] 次回授業に向けた充電開始

## 実験課題例

### 課題1: 基本測定実験（班活動）
**目的**: センサーの基本性能理解と班協力
**方法**: 
1. 各班で役割分担を決定
2. 定規で実際の距離を測定
3. センサー値と比較
4. 班内で結果を共有・考察

### 課題2: 運動解析実験（班対抗）
**目的**: 速度と加速度の理解、班間競争
**方法**:
1. 各班で等速運動を測定
2. 加速運動を測定
3. 班ごとに結果を発表
4. 測定精度を班間で比較

### 課題3: データ統合実験（全班協力）
**目的**: 統計的データ処理の理解
**方法**:
1. 全班で同一条件の測定実施
2. データを統合して分析
3. 班間での測定値のバラつき確認
4. 移動平均の効果を全体で検証

## システムの制約と対処法

### 技術的制約
| 制約 | 原因 | 対処法 |
|------|------|--------|
| 3m以上測定不可 | センサー仕様 | 測定範囲内での実験設計 |
| 透明体測定困難 | 光の透過 | 不透明な対象物を使用 |
| 黒色面で精度低下 | 光の吸収 | 白色紙などを貼付 |
| 同時接続数制限 | Bluetooth仕様 | 8台程度までの同時使用推奨 |

### 実用上の問題
- **電池持続時間**: 約2-3時間（使用状況による）
- **Bluetooth接続**: 複数台使用時は干渉の可能性
- **データ保存**: シリアルデータの手動保存が必要
- **センサー名管理**: 班分けとの対応付けが重要

## 発展的な取り組み

### プログラミング教育への応用
- [docs.md](./docs.md)参照でArduino IDEでのコード編集
- **各班でセンサー名をカスタマイズ**する課題
- サンプリング周波数の変更実習
- 新しい機能の追加（温度センサー等）

### 他教科との連携
- **数学**: 三角関数を使った角度測定
- **美術**: 3D造形物の計測
- **体育**: 運動解析への応用
- **情報**: IoT・センサーネットワークの理解

## 学習者向けリソース

### 生徒用マニュアル
- **基本操作**: [student.md](./student.md)で基本的な使い方を確認

### 技術資料
- **詳細仕様**: [docs.md](./docs.md)で開発環境や技術仕様を確認

## 評価の観点

### 知識・理解
- センサーの測定原理理解
- 距離・速度・時間の関係理解
- グラフの読み取り能力
- **正しいセンサー選択の理解**

### 技能
- 機器の適切な操作
- データの正確な記録
- グラフ作成と分析技能
- **班内での協力・役割分担**

### 思考・判断・表現
- 実験結果の考察
- 誤差要因の分析
- 改善提案の表現
- **班での議論と合意形成**

---
🎓 **指導効果を高めるために**: 実際に触れて、測定して、考察する体験型学習を重視してください  
👥 **班活動成功のカギ**: 正しいセンサー管理と役割分担で、全ての班が等しく学習できる環境を作りましょう
